raw `
.equ LOCALID_RIVAL,    1
.equ LOCALID_PROF_OAK, 2

IndigoPlateau_Exterior_MapScripts::
	map_script MAP_SCRIPT_ON_TRANSITION, IndigoPlateau_Exterior_OnTransition
	map_script MAP_SCRIPT_ON_FRAME_TABLE, IndigoPlateau_Exterior_OnFrame
	.byte 0

IndigoPlateau_Exterior_OnTransition::
	setworldmapflag FLAG_WORLD_MAP_INDIGO_PLATEAU_EXTERIOR
	call_if_eq VAR_MAP_SCENE_INDIGO_PLATEAU_EXTERIOR, 1, IndigoPlateau_Exterior_EventScript_PlayCreditsMusic
	end

IndigoPlateau_Exterior_EventScript_PlayCreditsMusic::
	playbgm MUS_CREDITS, 0
	return

IndigoPlateau_Exterior_OnFrame::
	map_script_2 VAR_MAP_SCENE_INDIGO_PLATEAU_EXTERIOR, 1, IndigoPlateau_Exterior_EventScript_Credits
	.2byte 0


@ After beating the champion, you are warped to the main
@ entrance of Indigo Plateau. This script starts running
@ immediately after your walking animation.
@ The script is timed to the music.
IndigoPlateau_Exterior_EventScript_Credits::
	lockall
	delay 105

	@ Rival exits building. Spawn a dummy object to lock the camera.
	opendoor 11, 6
	waitdooranim
	special SpawnCameraObject
	addobject LOCALID_RIVAL
	applymovement LOCALID_RIVAL, IndigoPlateau_Exterior_Movement_RivalExitBuilding
	applymovement OBJ_EVENT_ID_PLAYER, IndigoPlateau_Exterior_Movement_PushPlayerOutOfWay
	waitmovement 0
	closedoor 11, 6
	waitdooranim

	@ Rival runs off
	applymovement OBJ_EVENT_ID_PLAYER, IndigoPlateau_Exterior_Movement_PlayerWatchRivalLeave
	applymovement LOCALID_RIVAL, IndigoPlateau_Exterior_Movement_RivalLeave
	waitmovement 0
	delay 100

	@ Oak exits building
	opendoor 11, 6
	waitdooranim
	addobject LOCALID_PROF_OAK
	applymovement LOCALID_PROF_OAK, IndigoPlateau_Exterior_Movement_OakExitBuilding
	waitmovement 0
	closedoor 11, 6
	waitdooranim
	delay 160

	@ Oak looks at player, then walks off
	applymovement OBJ_EVENT_ID_PLAYER, IndigoPlateau_Exterior_Movement_PlayerWatchOakLeave
	applymovement LOCALID_PROF_OAK, IndigoPlateau_Exterior_Movement_OakLeave
	waitmovement 0
	delay 100

	@ Player begin to leave
	applymovement OBJ_EVENT_ID_PLAYER, IndigoPlateau_Exterior_Movement_PlayerBeginLeave
	waitmovement 0
	delay 155
	applymovement OBJ_EVENT_ID_PLAYER, IndigoPlateau_Exterior_Movement_PlayerFaceLeague
	waitmovement 0
	delay 90

	@ Player runs off
	applymovement OBJ_EVENT_ID_PLAYER, IndigoPlateau_Exterior_Movement_PlayerTurnAround
	waitmovement 0
	applymovement OBJ_EVENT_ID_PLAYER, IndigoPlateau_Exterior_Movement_PlayerLeave
	waitmovement 0

	@ Reset the map state and roll the credits
	special RemoveCameraObject
	setvar VAR_MAP_SCENE_INDIGO_PLATEAU_EXTERIOR, 0
	removeobject LOCALID_RIVAL
	removeobject LOCALID_PROF_OAK
	special DoCredits
	waitstate
	releaseall
	end

IndigoPlateau_Exterior_Movement_PlayerLeave::
	player_run_down
	player_run_down
	player_run_down
	player_run_down
	player_run_down
	player_run_down
	step_end

@ Unused
IndigoPlateau_Exterior_Movement_PlayerExitBuilding::
	walk_down
	walk_down
	step_end

IndigoPlateau_Exterior_Movement_PlayerWatchRivalLeave::
	delay_16
	delay_4
	walk_in_place_faster_down
	step_end

IndigoPlateau_Exterior_Movement_PlayerWatchOakLeave::
	delay_8
	walk_in_place_faster_right
	delay_16
	delay_16
	delay_16
	delay_16
	delay_16
	delay_16
	delay_16
	delay_16
	delay_16
	delay_16
	delay_16
	walk_in_place_faster_down
	step_end

IndigoPlateau_Exterior_Movement_PlayerBeginLeave::
	walk_right
	delay_16
	walk_down
	walk_down
	delay_16
	delay_16
	step_end

IndigoPlateau_Exterior_Movement_PlayerTurnAround::
	walk_in_place_faster_down
	step_end

IndigoPlateau_Exterior_Movement_PushPlayerOutOfWay::
	face_right
	lock_facing_direction
	walk_left
	unlock_facing_direction
	step_end

IndigoPlateau_Exterior_Movement_PlayerFaceLeague::
	walk_in_place_faster_up
	step_end

IndigoPlateau_Exterior_Movement_RivalLeave::
	walk_fast_down
	walk_fast_down
	walk_fast_down
	walk_fast_down
	walk_fast_down
	walk_fast_down
	walk_fast_down
	step_end

IndigoPlateau_Exterior_Movement_RivalExitBuilding::
	walk_fast_down
	step_end

IndigoPlateau_Exterior_Movement_OakLeave::
	walk_in_place_faster_left
	delay_16
	delay_16
	delay_16
	delay_16
	delay_16
	delay_16
	delay_16
	delay_16
	delay_16
	delay_16
	walk_in_place_faster_down
	delay_16
	walk_down
	walk_down
	walk_down
	walk_down
	walk_down
	walk_down
	walk_down
	step_end

IndigoPlateau_Exterior_Movement_OakExitBuilding::
	walk_down
	step_end

IndigoPlateau_Exterior_EventScript_OrbingCheck::
	goto_if_set FLAG_CAUGHT_REGISTEEL, IndigoPlateau_Exterior_EventScript_End
	goto_if_set FLAG_REGISTEEL_CHECKED, IndigoPlateau_Exterior_EventScript_Orbing
	msgbox IndigoPlateau_Exterior_Text_RegiceCheck
	closemessage
	setvar VAR_0x8005, 1
	special IsDodrioInParty
	goto_if_eq VAR_RESULT, 0, IndigoPlateau_Exterior_EventScript_NoEligiblePkmn
	setvar 0x8004, FAMECHECKER_LORELEI
	callnative CheckFilledFameCheckerFor0x8004
	compare VAR_RESULT, TRUE
	goto_if_eq IndigoPlateau_Exterior_EventScript_Flag
	release
	end

IndigoPlateau_Exterior_EventScript_NoEligiblePkmn::
	msgbox IndigoPlateau_Exterior_Text_NoEligiblePkmn
	release
	end

IndigoPlateau_Exterior_EventScript_Flag::
	setflag FLAG_REGISTEEL_CHECKED
	goto IndigoPlateau_Exterior_EventScript_Orbing
	end

IndigoPlateau_Exterior_EventScript_Orbing::
	msgbox IndigoPlateau_Exterior_Text_Whitney, MSGBOX_YESNO
	closemessage
	delay 40
	goto_if_eq VAR_RESULT, NO, IndigoPlateau_Exterior_EventScript_NoWhitney
	trainerbattle_single TRAINER_AQUA_LEADER, IndigoPlateau_Exterior_Text_YesWhitney, IndigoPlateau_Exterior_Text_PostWhitney, IndigoPlateau_Exterior_EventScript_PostWhitney, NO_MUSIC
	release
	end

IndigoPlateau_Exterior_EventScript_PostWhitney::
	special HealPlayerParty
	msgbox IndigoPlateau_Exterior_Text_WhitneyPostBattle
	goto_if_questlog EventScript_ReleaseEnd
	special QuestLog_CutRecording
	lock
	faceplayer
	setwildbattle SPECIES_REGISTEEL, 70
	waitse
	playmoncry SPECIES_REGISTEEL, CRY_MODE_ENCOUNTER
	message Text_Gyaoo
	waitmessage
	waitmoncry
	delay 10
	playbgm MUS_ENCOUNTER_GYM_LEADER, 0
	waitbuttonpress
	setflag FLAG_SYS_SPECIAL_WILD_BATTLE
	special StartLegendaryBattle
	waitstate
	clearflag FLAG_SYS_SPECIAL_WILD_BATTLE
	specialvar VAR_RESULT, GetBattleOutcome
	goto_if_eq VAR_RESULT, B_OUTCOME_WON, IndigoPlateau_Exterior_EventScript_DefeatedCelebi
	goto_if_eq VAR_RESULT, B_OUTCOME_RAN, IndigoPlateau_Exterior_EventScript_RanFromCelebi
	goto_if_eq VAR_RESULT, B_OUTCOME_PLAYER_TELEPORTED, IndigoPlateau_Exterior_EventScript_RanFromCelebi
	setflag FLAG_CAUGHT_REGISTEEL

	release
	end

IndigoPlateau_Exterior_EventScript_DefeatedCelebi::
	setflag FLAG_CAUGHT_REGISTEEL
	goto EventScript_RemoveStaticMon
	end

IndigoPlateau_Exterior_EventScript_RanFromCelebi::
	setvar VAR_0x8004, SPECIES_CELEBI
	goto EventScript_MonFlewAway
	end

IndigoPlateau_Exterior_EventScript_NoWhitney::
	msgbox IndigoPlateau_Exterior_Text_NoWhitney
	release
	end

IndigoPlateau_Exterior_EventScript_End::
	msgbox IndigoPlateau_Exterior_Text_EndWhitney
	release
	end

IndigoPlateau_Exterior_Text_NoEligiblePkmn::
	.string "You have not meet the requirements.\p"
	.string "Come back when you do.$"

IndigoPlateau_Exterior_Text_RegiceCheck::
	.string "Hello there {PLAYER}.\n"
	.string "I am the Frozen Mirage Trainer.\l"
	.string "Beat me and you shall face a\l"
	.string "special POKEMON.\l"
	.string "But first, I want to see a\l"
	.string "Three Headed Mascot,\l"
	.string "and knowledge on the Ice queen.$"

IndigoPlateau_Exterior_Text_Whitney::
	.string "So, you wish to face me?$"

IndigoPlateau_Exterior_Text_YesWhitney::
	.string "Very well! Prepare yourself!$"

IndigoPlateau_Exterior_Text_PostWhitney::
	.string "So you are worthy...$"

IndigoPlateau_Exterior_Text_WhitneyPostBattle::
	.string "Alright, you have bested me./p"
	.string "Be prepared to face REGISTEEL!$"

IndigoPlateau_Exterior_Text_EndWhitney::
	.string "You had one chance,\n"
	.string "Goodbye.$"

IndigoPlateau_Exterior_Text_NoWhitney::
	.string "Alright, take your time.$"

`
